<div class="game-board">
  <div
    *ngFor="let word of gameService.board; let i = index"
    [ngClass]="{ 'highlighted-row': gameService.selectedWord === i }"
  >
    <div class="letter-row">
      <!-- Left side holds the hint button -->
      <div class="icon-container">
        <div class="icon-box">
          <fa-icon
            class="hint"
            *ngIf="gameService.selectedWord === i"
            [icon]="faLightbulb"
            (click)="hint()"
          ></fa-icon>
        </div>
      </div>

      <!-- The letters of the word -->
      <div
        *ngFor="let letter of word.letters; let j = index"
        (click)="setSelectedCell(i, j)"
        [ngClass]="{ shake: word.wrong, bounceSize: word.solved }"
      >
        <div
          class="letter-box"
          [ngClass]="{
            'locked-box': word.locked == true,
            'solved-box': word.solved == true,
            'wrong-box': word.wrong == true,
            'highlighted-box':
              gameService.selectedWord === i &&
              gameService.selectedLetter === j,
            'path-letter':
              i > 0 &&
              gameService.board[i - 1].letters[j] &&
              letter != gameService.board[i - 1].letters[j],
            'size-3letter-2hop':
              gameService.numLetters == 3 && gameService.numHops == 2,
            'size-3letter-3hop':
              gameService.numLetters == 3 && gameService.numHops == 3,
            'size-3letter-4hop':
              gameService.numLetters == 3 && gameService.numHops == 4,
            'size-3letter-5hop':
              gameService.numLetters == 3 && gameService.numHops == 5,
            'size-4letter-2hop':
              gameService.numLetters == 4 && gameService.numHops == 2,
            'size-4letter-3hop':
              gameService.numLetters == 4 && gameService.numHops == 3,
            'size-4letter-4hop':
              gameService.numLetters == 4 && gameService.numHops == 4,
            'size-4letter-5hop':
              gameService.numLetters == 4 && gameService.numHops == 5,
            'size-5letter-2hop':
              gameService.numLetters == 5 && gameService.numHops == 2,
            'size-5letter-3hop':
              gameService.numLetters == 5 && gameService.numHops == 3,
            'size-5letter-4hop':
              gameService.numLetters == 5 && gameService.numHops == 4,
            'size-5letter-5hop':
              gameService.numLetters == 5 && gameService.numHops == 5
          }"
        >
          {{ letter }}
          <!-- Spinner while the letter is loading -->
          <div *ngIf="word.loading == true" class="icon-box testing fa-spin">
            <fa-icon class="icon" [icon]="faSpinner"></fa-icon>
          </div>

          <!-- Frowny face if the game is broken -->
          <div
            *ngIf="word.locked && gameService.gameStatus == 'broken'"
            class="icon-box"
          >
            <fa-icon class="icon" [icon]="faFaceFrown"></fa-icon>
          </div>
        </div>
      </div>

      <!-- The rest of these are icons depending on the word -->
      <div class="icon-container">
        <!-- Locked word, either invisible icon (at bottom) or reload icon (at top) -->
        <div *ngIf="word.locked" class="icon-box">
          <fa-icon
            *ngIf="i === 0"
            [ngClass]="{
              win: gameService.gameStatus === 'win',
              broken: gameService.gameStatus === 'broken',
              unverified: gameService.gameStatus === 'run',
              'fa-spin': gameService.gameStatus === 'initialize'
            }"
            (click)="newGame()"
            [icon]="faRepeat"
          ></fa-icon>
        </div>

        <!-- Unverified word -->
        <div
          *ngIf="
            !word.locked &&
            word.populated &&
            !word.solved &&
            !word.wrong &&
            !word.testing &&
            !word.broken
          "
          class="icon-box unverified"
          (click)="testWord(i)"
        >
          <fa-icon [icon]="faCircleQuestion"></fa-icon>
        </div>

        <!-- Solved word -->
        <div
          *ngIf="!word.locked && word.solved"
          class="icon-box solved"
          (click)="testWord(i)"
        >
          <fa-icon [icon]="faCircleCheck"></fa-icon>
        </div>

        <!-- Wrong word -->
        <div
          *ngIf="!word.locked && word.wrong"
          class="icon-box wrong"
          (click)="testWord(i)"
        >
          <fa-icon [icon]="faCircleExclamation"></fa-icon>
        </div>

        <!-- Testing word -->
        <div
          *ngIf="!word.locked && word.testing"
          class="icon-box testing fa-spin"
          (click)="testWord(i)"
        >
          <fa-icon [icon]="faSpinner"></fa-icon>
        </div>

        <!-- Broken word -->
        <div
          *ngIf="!word.locked && word.broken"
          class="icon-box broken"
          (click)="testWord(i)"
        >
          <fa-icon [icon]="faCircleXmark"></fa-icon>
        </div>
      </div>
    </div>
  </div>
  <div class="sub-row">{{ gameService.lastExecutionTime }}</div>
</div>
<h1>
  <button (click)='f()'>Te st</button>
</h1>